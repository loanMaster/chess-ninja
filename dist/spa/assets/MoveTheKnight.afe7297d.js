import{d as j,r as i,aA as B,b1 as E,C as L,a as M,o as d,e as m,g as t,t as r,j as h,F as O,l as T,h as p,f as w,x as A,an as S,w as $,Q as R,b4 as V}from"./index.97bac33d.js";import{c as D,e as g,T as _}from"./register-defaults.6baf7cb5.js";import{C as x}from"./chess-utils.c57807a7.js";import{u as y}from"./exercise.store.a82d6b73.js";const F={class:"relative-position column flex-1 self-stretch"},G={class:"flex-1 justify-center column items-center"},I={class:"text-h5 text-center"},U={class:"relative-position justify-center column items-center"},K={class:"g-large-font g-full-width q-mt-md q-pa-md text-h5"},P={class:"row q-gutter-md max-width-xs q-mt-md justify-center",style:{flex:"1 0 auto"}},Y={class:"column justify-center items-center",style:{height:"100%"}},z={class:"bg-white q-pa-md rounded-borders shadow-5"},ee=j({__name:"MoveTheKnight",setup(H){const{revealed:C,store:k,inputDisabled:n}=D(),v=i(!1),q=S(),s=i(""),l=i(""),u=i(""),c=new B;E(()=>{g.createExercise(5)}),L(async()=>{n.value=!0,y().beginExercise(),f()});async function f(){if(!await g.prepareNewQuestion({inputDisabled:n,revealed:C,router:q}))return;s.value=x.getOtherRandomSquare([]),c.createNew({pieces:{[s.value]:"N"}});const e=c.moves(s.value);u.value=x.getOtherRandomSquare([...e.map(a=>a.to),s.value]),y().exercise.currentQuestion>1&&await new _().fadeOut(l.value,.5),n.value=!1}async function N(e,a){n.value||(a.stopPropagation(),v.value=u.value.toLocaleLowerCase()===e.toLocaleLowerCase(),v.value?(n.value=!0,k.$patch(o=>o.exercise.correctAnswers++),await new _().fadeIn(l.value,.5),f()):(s.value=e,c.createNew({pieces:{[s.value]:"N"}})))}const b=M(()=>{if(s.value){c.createNew({pieces:{[s.value]:"N"}});const e=c.moves(s.value).map(a=>a.to);return e.sort((a,o)=>a>o?1:-1),e}else return[]});return(e,a)=>(d(),m("div",F,[t("div",G,[t("div",I,r(e.$t("Move your knight to the target square")),1),t("div",U,[t("div",K,[t("div",null,r(e.$t("The target square is"))+" "+r(u.value),1),t("div",null,[h(r(e.$t("Your knight is on square"))+" ",1),t("span",null,r(s.value),1)])]),t("div",P,[(d(!0),m(O,null,T(p(b),o=>(d(),m("div",{key:o,class:"text-h5"},[w(R,{push:"",color:"primary",onClick:Q=>N(o,Q),"no-caps":""},{default:$(()=>[h(r(o),1)]),_:2},1032,["onClick"])]))),128))]),t("div",{class:"absolute-full no-pointer-events",style:{opacity:"0"},ref_key:"correctAnswer",ref:l},[t("div",Y,[t("div",z,[w(A,{name:p(V),color:"green",class:"text-h1 margin-auto"},null,8,["name"])])])],512)])])]))}});export{ee as default};
