import{A as rt,r as V,a as r,B as Xe,C as Le,D as Vt,E as Nt,R as Dt,G as y,H as gt,I as pe,J as Ft,K as zt,x as Be,L as Ht,M as _e,N as Ot,O as jt,P as Se,S as it,T as dt,U as ge,V as yt,W as Ct,X as Qt,Y as Ye,Z as Kt,$ as Ut,a0 as Wt,a1 as kt,a2 as ne,a3 as wt,a4 as xt,a5 as ce,a6 as ke,a7 as xe,a8 as _t,a9 as we,aa as Xt,ab as Yt,ac as Gt,ad as Jt,ae as St,af as Tt,ag as qt,d as Ae,u as oe,ah as g,o as O,e as G,h as S,ai as de,F as $t,l as Mt,n as Pt,t as X,aj as Bt,g as W,s as Ke,f as L,w as J,j as ye,Q as he,ak as vt,al as lt,am as Zt,an as en,ao as st,ap as tn,aq as nn,z as an,ar as on,as as Lt,i as rn,at as ln,au as sn,av as un,aw as cn,ax as dn,ay as ft,az as vn}from"./index.acb1a3f4.js";import{C as At}from"./chess-utils.5eb9ca53.js";import{C as fn}from"./chess-board.interface.005362a6.js";import"./dateTimestampProvider.aca62768.js";let mn=0;const hn=["click","keydown"],pn={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${mn++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function bn(t,n,l,u){const e=Vt(gt,rt);if(e===rt)return console.error("QTab/QRouteTab component needs to be child of QTabs"),rt;const{proxy:a}=_e(),s=V(null),i=V(null),d=V(null),f=r(()=>t.disable===!0||t.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),m=r(()=>e.currentModel.value===t.name),x=r(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(m.value===!0?" q-tab--active"+(e.tabProps.value.activeClass?" "+e.tabProps.value.activeClass:"")+(e.tabProps.value.activeColor?` text-${e.tabProps.value.activeColor}`:"")+(e.tabProps.value.activeBgColor?` bg-${e.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&e.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||e.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),v=r(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(e.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),C=r(()=>t.disable===!0||e.hasFocus.value===!0||m.value===!1&&e.hasActiveTab.value===!0?-1:t.tabindex||0);function p(h,P){if(P!==!0&&s.value!==null&&s.value.focus(),t.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&pe(h);return}if(u===void 0){e.updateModel({name:t.name}),l("click",h);return}if(u.hasRouterLink.value===!0){const N=(F={})=>{let D;const Q=F.to===void 0||Ot(F.to,t.to)===!0?e.avoidRouteWatcher=jt():null;return u.navigateToRouterLink(h,{...F,returnRouterError:!0}).catch(Y=>{D=Y}).then(Y=>{if(Q===e.avoidRouteWatcher&&(e.avoidRouteWatcher=!1,D===void 0&&(Y===void 0||Y.message.startsWith("Avoided redundant navigation")===!0)&&e.updateModel({name:t.name})),F.returnRouterError===!0)return D!==void 0?Promise.reject(D):Y})};l("click",h,N),h.defaultPrevented!==!0&&N();return}l("click",h)}function q(h){Ft(h,[13,32])?p(h,!0):zt(h)!==!0&&h.keyCode>=35&&h.keyCode<=40&&h.altKey!==!0&&h.metaKey!==!0&&e.onKbdNavigate(h.keyCode,a.$el)===!0&&pe(h),l("keydown",h)}function B(){const h=e.tabProps.value.narrowIndicator,P=[],N=y("div",{ref:d,class:["q-tab__indicator",e.tabProps.value.indicatorClass]});t.icon!==void 0&&P.push(y(Be,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&P.push(y("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&P.push(t.alertIcon!==void 0?y(Be,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):y("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),h===!0&&P.push(N);const F=[y("div",{class:"q-focus-helper",tabindex:-1,ref:s}),y("div",{class:v.value},Ht(n.default,P))];return h===!1&&F.push(N),F}const z={name:r(()=>t.name),rootRef:i,tabIndicatorRef:d,routeData:u};Xe(()=>{e.unregisterTab(z)}),Le(()=>{e.registerTab(z)});function j(h,P){const N={ref:i,class:x.value,tabindex:C.value,role:"tab","aria-selected":m.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:p,onKeydown:q,...P};return Nt(y(h,N,B()),[[Dt,f.value]])}return{renderTab:j,$tabs:e}}var je=Se({name:"QTab",props:pn,emits:hn,setup(t,{slots:n,emit:l}){const{renderTab:u}=bn(t,n,l);return()=>u("div")}});let Rt=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(n),t.scrollLeft=-1e3,Rt=t.scrollLeft>=0,t.remove()}function gn(t,n,l){const u=l===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?u[0]:u[1]}${t?` text-${t}`:""}`}const yn=["left","center","right","justify"];var Cn=Se({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>yn.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:n,emit:l}){const{proxy:u}=_e(),{$q:e}=u,{registerTick:a}=it(),{registerTick:s}=it(),{registerTick:i}=it(),{registerTimeout:d,removeTimeout:f}=dt(),{registerTimeout:m,removeTimeout:x}=dt(),v=V(null),C=V(null),p=V(t.modelValue),q=V(!1),B=V(!0),z=V(!1),j=V(!1),h=[],P=V(0),N=V(!1);let F=null,D=null,Q;const Y=r(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:gn(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),ve=r(()=>{const c=P.value,b=p.value;for(let w=0;w<c;w++)if(h[w].name.value===b)return!0;return!1}),re=r(()=>`q-tabs__content--align-${q.value===!0?"left":j.value===!0?"justify":t.align}`),be=r(()=>`q-tabs row no-wrap items-center q-tabs--${q.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),_=r(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+re.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),M=r(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),K=r(()=>t.vertical!==!0&&e.lang.rtl===!0),ee=r(()=>Rt===!1&&K.value===!0);ge(K,se),ge(()=>t.modelValue,c=>{ie({name:c,setCurrent:!0,skipEmit:!0})}),ge(()=>t.outsideArrows,fe);function ie({name:c,setCurrent:b,skipEmit:w}){p.value!==c&&(w!==!0&&t["onUpdate:modelValue"]!==void 0&&l("update:modelValue",c),(b===!0||t["onUpdate:modelValue"]===void 0)&&(Ge(p.value,c),p.value=c))}function fe(){a(()=>{Re({width:v.value.offsetWidth,height:v.value.offsetHeight})})}function Re(c){if(M.value===void 0||C.value===null)return;const b=c[M.value.container],w=Math.min(C.value[M.value.scroll],Array.prototype.reduce.call(C.value.children,(R,$)=>R+($[M.value.content]||0),0)),I=b>0&&w>b;q.value=I,I===!0&&s(se),j.value=b<parseInt(t.breakpoint,10)}function Ge(c,b){const w=c!=null&&c!==""?h.find(R=>R.name.value===c):null,I=b!=null&&b!==""?h.find(R=>R.name.value===b):null;if(w&&I){const R=w.tabIndicatorRef.value,$=I.tabIndicatorRef.value;F!==null&&(clearTimeout(F),F=null),R.style.transition="none",R.style.transform="none",$.style.transition="none",$.style.transform="none";const T=R.getBoundingClientRect(),H=$.getBoundingClientRect();$.style.transform=t.vertical===!0?`translate3d(0,${T.top-H.top}px,0) scale3d(1,${H.height?T.height/H.height:1},1)`:`translate3d(${T.left-H.left}px,0,0) scale3d(${H.width?T.width/H.width:1},1,1)`,i(()=>{F=setTimeout(()=>{F=null,$.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",$.style.transform="none"},70)})}I&&q.value===!0&&le(I.rootRef.value)}function le(c){const{left:b,width:w,top:I,height:R}=C.value.getBoundingClientRect(),$=c.getBoundingClientRect();let T=t.vertical===!0?$.top-I:$.left-b;if(T<0){C.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(T),se();return}T+=t.vertical===!0?$.height-R:$.width-w,T>0&&(C.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(T),se())}function se(){const c=C.value;if(c===null)return;const b=c.getBoundingClientRect(),w=t.vertical===!0?c.scrollTop:Math.abs(c.scrollLeft);K.value===!0?(B.value=Math.ceil(w+b.width)<c.scrollWidth-1,z.value=w>0):(B.value=w>0,z.value=t.vertical===!0?Math.ceil(w+b.height)<c.scrollHeight:Math.ceil(w+b.width)<c.scrollWidth)}function Ie(c){D!==null&&clearInterval(D),D=setInterval(()=>{Ne(c)===!0&&te()},5)}function Ee(){Ie(ee.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ve(){Ie(ee.value===!0?0:Number.MAX_SAFE_INTEGER)}function te(){D!==null&&(clearInterval(D),D=null)}function Je(c,b){const w=Array.prototype.filter.call(C.value.children,H=>H===b||H.matches&&H.matches(".q-tab.q-focusable")===!0),I=w.length;if(I===0)return;if(c===36)return le(w[0]),w[0].focus(),!0;if(c===35)return le(w[I-1]),w[I-1].focus(),!0;const R=c===(t.vertical===!0?38:37),$=c===(t.vertical===!0?40:39),T=R===!0?-1:$===!0?1:void 0;if(T!==void 0){const H=K.value===!0?-1:1,Z=w.indexOf(b)+T*H;return Z>=0&&Z<I&&(le(w[Z]),w[Z].focus({preventScroll:!0})),!0}}const Ze=r(()=>ee.value===!0?{get:c=>Math.abs(c.scrollLeft),set:(c,b)=>{c.scrollLeft=-b}}:t.vertical===!0?{get:c=>c.scrollTop,set:(c,b)=>{c.scrollTop=b}}:{get:c=>c.scrollLeft,set:(c,b)=>{c.scrollLeft=b}});function Ne(c){const b=C.value,{get:w,set:I}=Ze.value;let R=!1,$=w(b);const T=c<$?-1:1;return $+=T*5,$<0?(R=!0,$=0):(T===-1&&$<=c||T===1&&$>=c)&&(R=!0,$=c),I(b,$),se(),R}function De(c,b){for(const w in c)if(c[w]!==b[w])return!1;return!0}function Te(){let c=null,b={matchedLen:0,queryDiff:9999,hrefLen:0};const w=h.filter(T=>T.routeData!==void 0&&T.routeData.hasRouterLink.value===!0),{hash:I,query:R}=u.$route,$=Object.keys(R).length;for(const T of w){const H=T.routeData.exact.value===!0;if(T.routeData[H===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Z,query:Pe,matched:tt,href:nt}=T.routeData.resolvedLink.value,o=Object.keys(Pe).length;if(H===!0){if(Z!==I||o!==$||De(R,Pe)===!1)continue;c=T.name.value;break}if(Z!==""&&Z!==I||o!==0&&De(Pe,R)===!1)continue;const k={matchedLen:tt.length,queryDiff:$-o,hrefLen:nt.length-Z.length};if(k.matchedLen>b.matchedLen){c=T.name.value,b=k;continue}else if(k.matchedLen!==b.matchedLen)continue;if(k.queryDiff<b.queryDiff)c=T.name.value,b=k;else if(k.queryDiff!==b.queryDiff)continue;k.hrefLen>b.hrefLen&&(c=T.name.value,b=k)}c===null&&h.some(T=>T.routeData===void 0&&T.name.value===p.value)===!0||ie({name:c,setCurrent:!0})}function et(c){if(f(),N.value!==!0&&v.value!==null&&c.target&&typeof c.target.closest=="function"){const b=c.target.closest(".q-tab");b&&v.value.contains(b)===!0&&(N.value=!0,q.value===!0&&le(b))}}function Fe(){d(()=>{N.value=!1},30)}function me(){He.avoidRouteWatcher===!1?m(Te):x()}function qe(){if(Q===void 0){const c=ge(()=>u.$route.fullPath,me);Q=()=>{c(),Q=void 0}}}function $e(c){h.push(c),P.value++,fe(),c.routeData===void 0||u.$route===void 0?m(()=>{if(q.value===!0){const b=p.value,w=b!=null&&b!==""?h.find(I=>I.name.value===b):null;w&&le(w.rootRef.value)}}):(qe(),c.routeData.hasRouterLink.value===!0&&me())}function ze(c){h.splice(h.indexOf(c),1),P.value--,fe(),Q!==void 0&&c.routeData!==void 0&&(h.every(b=>b.routeData===void 0)===!0&&Q(),me())}const He={currentModel:p,tabProps:Y,hasFocus:N,hasActiveTab:ve,registerTab:$e,unregisterTab:ze,verifyRouteModel:me,updateModel:ie,onKbdNavigate:Je,avoidRouteWatcher:!1};Kt(gt,He);function Oe(){F!==null&&clearTimeout(F),te(),Q!==void 0&&Q()}let Me;return Xe(Oe),yt(()=>{Me=Q!==void 0,Oe()}),Ct(()=>{Me===!0&&qe(),fe()}),()=>y("div",{ref:v,class:be.value,role:"tablist",onFocusin:et,onFocusout:Fe},[y(Qt,{onResize:Re}),y("div",{ref:C,class:_.value,onScroll:se},Ye(n.default)),y(Be,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(B.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||e.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:Ee,onTouchstartPassive:Ee,onMouseupPassive:te,onMouseleavePassive:te,onTouchendPassive:te}),y(Be,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||e.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:Ve,onTouchstartPassive:Ve,onMouseupPassive:te,onMouseleavePassive:te,onTouchendPassive:te})])}});const kn=[y("g",[y("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),y("clipPath",{id:"uil-hourglass-clip1"},[y("rect",{x:"15",y:"20",width:" 70",height:"25"},[y("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),y("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),y("clipPath",{id:"uil-hourglass-clip2"},[y("rect",{x:"15",y:"55",width:" 70",height:"25"},[y("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),y("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),y("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),y("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),y("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var It=Se({name:"QSpinnerHourglass",props:Ut,setup(t){const{cSize:n,classes:l}=Wt(t);return()=>y("svg",{class:l.value,width:n.value,height:n.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},kn)}});const ct={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},wn=Object.keys(ct);ct.all=!0;function Ue(t){const n={};for(const l of wn)t[l]===!0&&(n[l]=!0);return Object.keys(n).length===0?ct:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function We(t,n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&t.target.nodeName.toUpperCase()!=="INPUT"&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function xn(t){const n=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((l,u)=>{const e=parseFloat(l);e&&(n[u]=e)}),n}var _n=kt({name:"touch-swipe",beforeMount(t,{value:n,arg:l,modifiers:u}){if(u.mouse!==!0&&ne.has.touch!==!0)return;const e=u.mouseCapture===!0?"Capture":"",a={handler:n,sensitivity:xn(l),direction:Ue(u),noop:wt,mouseStart(s){We(s,a)&&xt(s)&&(ce(a,"temp",[[document,"mousemove","move",`notPassive${e}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(s,!0))},touchStart(s){if(We(s,a)){const i=s.target;ce(a,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),a.start(s)}},start(s,i){ne.is.firefox===!0&&ke(t,!0);const d=xe(s);a.event={x:d.left,y:d.top,time:Date.now(),mouse:i===!0,dir:!1}},move(s){if(a.event===void 0)return;if(a.event.dir!==!1){pe(s);return}const i=Date.now()-a.event.time;if(i===0)return;const d=xe(s),f=d.left-a.event.x,m=Math.abs(f),x=d.top-a.event.y,v=Math.abs(x);if(a.event.mouse!==!0){if(m<a.sensitivity[1]&&v<a.sensitivity[1]){a.end(s);return}}else if(m<a.sensitivity[2]&&v<a.sensitivity[2])return;const C=m/i,p=v/i;a.direction.vertical===!0&&m<v&&m<100&&p>a.sensitivity[0]&&(a.event.dir=x<0?"up":"down"),a.direction.horizontal===!0&&m>v&&v<100&&C>a.sensitivity[0]&&(a.event.dir=f<0?"left":"right"),a.direction.up===!0&&m<v&&x<0&&m<100&&p>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&m<v&&x>0&&m<100&&p>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&m>v&&f<0&&v<100&&C>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&m>v&&f>0&&v<100&&C>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(pe(s),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),_t(),a.styleCleanup=q=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const B=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(B,50):B()}),a.handler({evt:s,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:i,distance:{x:m,y:v}})):a.end(s)},end(s){a.event!==void 0&&(we(a,"temp"),ne.is.firefox===!0&&ke(t,!1),a.styleCleanup!==void 0&&a.styleCleanup(!0),s!==void 0&&a.event.dir!==!1&&pe(s),a.event=void 0)}};if(t.__qtouchswipe=a,u.mouse===!0){const s=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";ce(a,"main",[[t,"mousedown","mouseStart",`passive${s}`]])}ne.has.touch===!0&&ce(a,"main",[[t,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const l=t.__qtouchswipe;l!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&l.end(),l.handler=n.value),l.direction=Ue(n.modifiers))},beforeUnmount(t){const n=t.__qtouchswipe;n!==void 0&&(we(n,"main"),we(n,"temp"),ne.is.firefox===!0&&ke(t,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete t.__qtouchswipe)}});function Sn(){const t=new Map;return{getCache:function(n,l){return t[n]===void 0?t[n]=l:t[n]},getCacheWithFn:function(n,l){return t[n]===void 0?t[n]=l():t[n]}}}const Tn={name:{required:!0},disable:Boolean},mt={setup(t,{slots:n}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},Ye(n.default))}},qn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},$n=["update:modelValue","beforeTransition","transition"];function Mn(){const{props:t,emit:n,proxy:l}=_e(),{getCacheWithFn:u}=Sn();let e,a;const s=V(null),i=V(null);function d(_){const M=t.vertical===!0?"up":"left";D((l.$q.lang.rtl===!0?-1:1)*(_.direction===M?1:-1))}const f=r(()=>[[_n,d,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),m=r(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),x=r(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),v=r(()=>`--q-transition-duration: ${t.transitionDuration}ms`),C=r(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),p=r(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),q=r(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);ge(()=>t.modelValue,(_,M)=>{const K=h(_)===!0?P(_):-1;a!==!0&&F(K===-1?0:K<P(M)?-1:1),s.value!==K&&(s.value=K,n("beforeTransition",_,M),Gt(()=>{n("transition",_,M)}))});function B(){D(1)}function z(){D(-1)}function j(_){n("update:modelValue",_)}function h(_){return _!=null&&_!==""}function P(_){return e.findIndex(M=>M.props.name===_&&M.props.disable!==""&&M.props.disable!==!0)}function N(){return e.filter(_=>_.props.disable!==""&&_.props.disable!==!0)}function F(_){const M=_!==0&&t.animated===!0&&s.value!==-1?"q-transition--"+(_===-1?m.value:x.value):null;i.value!==M&&(i.value=M)}function D(_,M=s.value){let K=M+_;for(;K>-1&&K<e.length;){const ee=e[K];if(ee!==void 0&&ee.props.disable!==""&&ee.props.disable!==!0){F(_),a=!0,n("update:modelValue",ee.props.name),setTimeout(()=>{a=!1});return}K+=_}t.infinite===!0&&e.length>0&&M!==-1&&M!==e.length&&D(_,_===-1?e.length:-1)}function Q(){const _=P(t.modelValue);return s.value!==_&&(s.value=_),!0}function Y(){const _=h(t.modelValue)===!0&&Q()&&e[s.value];return t.keepAlive===!0?[y(Jt,p.value,[y(q.value===!0?u(C.value,()=>({...mt,name:C.value})):mt,{key:C.value,style:v.value},()=>_)])]:[y("div",{class:"q-panel scroll",style:v.value,key:C.value,role:"tabpanel"},[_])]}function ve(){if(e.length!==0)return t.animated===!0?[y(Xt,{name:i.value},Y)]:Y()}function re(_){return e=Yt(Ye(_.default,[])).filter(M=>M.props!==null&&M.props.slot===void 0&&h(M.props.name)===!0),e.length}function be(){return e}return Object.assign(l,{next:B,previous:z,goTo:j}),{panelIndex:s,panelDirectives:f,updatePanelsList:re,updatePanelIndex:Q,getPanelContent:ve,getEnabledPanels:N,getPanels:be,isValidPanelName:h,keepAliveProps:p,needsUniqueKeepAliveWrapper:q,goToPanelByOffset:D,goToPanel:j,nextPanel:B,previousPanel:z}}var Qe=Se({name:"QTabPanel",props:Tn,setup(t,{slots:n}){return()=>y("div",{class:"q-tab-panel",role:"tabpanel"},Ye(n.default))}}),Pn=Se({name:"QTabPanels",props:{...qn,...St},emits:$n,setup(t,{slots:n}){const l=_e(),u=Tt(t,l.proxy.$q),{updatePanelsList:e,getPanelContent:a,panelDirectives:s}=Mn(),i=r(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(e(n),qt("div",{class:i.value},a(),"pan",t.swipeable,()=>s.value))}});const Bn={class:"q-mx-sm text-h6 scroll-y",data:"history",style:{height:"100%","overflow-y":"auto"}},Ln={key:0},ht=Ae({__name:"MoveHistory",setup(t){const n=oe(),l=r(()=>g().position.moveHistory),u=r(()=>{const d=[];g().position.moveHistory.length>0&&l.value[0].configuration.turn==="black"&&d.push({white:void 0,black:void 0});for(let f=0;f<l.value.length;f++)f%2===0?d.push({white:l.value[f],black:void 0}):d[(f-1)/2].black=l.value[f];return d});function e(d){return n.showChessPieceSymbols?At.getSymbol(d[0])+d.substring(1):d.replace("p","").replace("P","")}Le(()=>{g().$onAction(({name:d,after:f})=>{f(()=>{(d==="playerMove"||d==="aiMove")&&a()})})});function a(){const d=document.querySelector('[data="history"]');d.scrollTop=d.scrollHeight-d.clientHeight}const s=r(()=>g().position.indexInHistory<g().position.moveHistory.length-1);function i(d){return l.value[0].configuration.turn==="black"?d===Math.floor((g().position.indexInHistory+1)/2):d===Math.floor(g().position.indexInHistory/2)}return(d,f)=>(O(),G("div",Bn,[S(u).length===0?(O(),G("div",Ln,"-")):de("",!0),(O(!0),G($t,null,Mt(S(u),(m,x)=>(O(),G("div",{key:x,class:Pt(S(s)&&i(x)?"bg-red":"")},X(x+1)+". "+X(m.white?`${e(m.white.description)}${m.white.checkmate?"#":m.white.check?"!":""}`:"")+" "+X(m.black?`${e(m.black.description)}${m.black.checkmate?"#":m.black.check?"!":""}`:""),3))),128))]))}}),An={class:"row q-mb-lg justify-center items-center relative-position",style:{height:"2rem"}},Rn={key:0,class:"text-h5"},In={key:1,class:"text-h5"},En={ref:"buttons",class:"row wrap justify-center q-gutter-md-sm q-gutter-xs-xs q-gutter-sm-xs"},Vn=Ae({__name:"SelectMoveButtons",setup(t){const{t:n}=Bt(),l=V([]),u=oe(),e={p:"1",n:"2",b:"3",r:"4",q:"5",k:"6"},a=r(()=>g().position.check&&g().position.turn===g().playerColor),s=r(()=>g().position.checkMate),i=r(()=>g().position.isFinished);Le(()=>{const v=()=>{g().playersTurn&&(l.value=g().position.moves.sort((C,p)=>{const q=e[C.description[0].toLowerCase()]+C.description.substring(1),B=e[p.description[0].toLowerCase()]+p.description.substring(1);return q>B?1:-1}))};g().$subscribe(()=>{v()}),v()});const d=r(()=>{var v;return f((v=g().lastOpponentMove)==null?void 0:v.description)||n("Make a move")});function f(v){return v&&(u.showChessPieceSymbols?(v[0].toLowerCase()==="p"?"":At.getSymbol(v[0]))+v.substring(1):v.replace("p","").replace("P",""))}function m(v){g().playerMove(v)}const x=r(()=>g().playersTurn);return(v,C)=>(O(),G("div",null,[W("div",An,[W("div",null,[S(x)?(O(),G("div",Rn,X(S(d))+X(S(s)?"#":S(a)?"!":""),1)):de("",!0),!S(x)&&S(i)?(O(),G("div",In,X(S(s)?v.$t("Checkmate"):v.$t("Draw")),1)):de("",!0),!S(x)&&!S(i)?(O(),Ke(It,{key:2,color:"gray",size:"1.5rem"})):de("",!0)])]),W("div",En,[(O(!0),G($t,null,Mt(l.value,p=>(O(),G("div",{key:p},[L(he,{class:"text-h6",style:{padding:"0.5rem"},"no-caps":"",disable:!S(x),onClick:q=>m(p)},{default:J(()=>[ye(X(f(p.description)),1)]),_:2},1032,["disable","onClick"])]))),128))],512)]))}});function ut(t,n,l){const u=xe(t);let e,a=u.left-n.event.x,s=u.top-n.event.y,i=Math.abs(a),d=Math.abs(s);const f=n.direction;f.horizontal===!0&&f.vertical!==!0?e=a<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?e=s<0?"up":"down":f.up===!0&&s<0?(e="up",i>d&&(f.left===!0&&a<0?e="left":f.right===!0&&a>0&&(e="right"))):f.down===!0&&s>0?(e="down",i>d&&(f.left===!0&&a<0?e="left":f.right===!0&&a>0&&(e="right"))):f.left===!0&&a<0?(e="left",i<d&&(f.up===!0&&s<0?e="up":f.down===!0&&s>0&&(e="down"))):f.right===!0&&a>0&&(e="right",i<d&&(f.up===!0&&s<0?e="up":f.down===!0&&s>0&&(e="down")));let m=!1;if(e===void 0&&l===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};e=n.event.lastDir,m=!0,e==="left"||e==="right"?(u.left-=a,i=0,a=0):(u.top-=s,d=0,s=0)}return{synthetic:m,payload:{evt:t,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:u,direction:e,isFirst:n.event.isFirst,isFinal:l===!0,duration:Date.now()-n.event.time,distance:{x:i,y:d},offset:{x:a,y:s},delta:{x:u.left-n.event.lastX,y:u.top-n.event.lastY}}}}let Nn=0;var Dn=kt({name:"touch-pan",beforeMount(t,{value:n,modifiers:l}){if(l.mouse!==!0&&ne.has.touch!==!0)return;function u(a,s){l.mouse===!0&&s===!0?pe(a):(l.stop===!0&&lt(a),l.prevent===!0&&vt(a))}const e={uid:"qvtp_"+Nn++,handler:n,modifiers:l,direction:Ue(l),noop:wt,mouseStart(a){We(a,e)&&xt(a)&&(ce(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(a,!0))},touchStart(a){if(We(a,e)){const s=a.target;ce(e,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),e.start(a)}},start(a,s){if(ne.is.firefox===!0&&ke(t,!0),e.lastEvt=a,s===!0||l.stop===!0){if(e.direction.all!==!0&&(s!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const f=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&vt(f),a.cancelBubble===!0&&lt(f),Object.assign(f,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[e.uid]:a.qClonedBy.concat(e.uid)}),e.initialEvent={target:a.target,event:f}}lt(a)}const{left:i,top:d}=xe(a);e.event={x:i,y:d,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:d}},move(a){if(e.event===void 0)return;const s=xe(a),i=s.left-e.event.x,d=s.top-e.event.y;if(i===0&&d===0)return;e.lastEvt=a;const f=e.event.mouse===!0,m=()=>{u(a,f);let C;l.preserveCursor!==!0&&l.preservecursor!==!0&&(C=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),_t(),e.styleCleanup=p=>{if(e.styleCleanup=void 0,C!==void 0&&(document.documentElement.style.cursor=C),document.body.classList.remove("non-selectable"),f===!0){const q=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{q(),p()},50):q()}else p!==void 0&&p()}};if(e.event.detected===!0){e.event.isFirst!==!0&&u(a,e.event.mouse);const{payload:C,synthetic:p}=ut(a,e,!1);C!==void 0&&(e.handler(C)===!1?e.end(a):(e.styleCleanup===void 0&&e.event.isFirst===!0&&m(),e.event.lastX=C.position.left,e.event.lastY=C.position.top,e.event.lastDir=p===!0?void 0:C.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||f===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){m(),e.event.detected=!0,e.move(a);return}const x=Math.abs(i),v=Math.abs(d);x!==v&&(e.direction.horizontal===!0&&x>v||e.direction.vertical===!0&&x<v||e.direction.up===!0&&x<v&&d<0||e.direction.down===!0&&x<v&&d>0||e.direction.left===!0&&x>v&&i<0||e.direction.right===!0&&x>v&&i>0?(e.event.detected=!0,e.move(a)):e.end(a,!0))},end(a,s){if(e.event!==void 0){if(we(e,"temp"),ne.is.firefox===!0&&ke(t,!1),s===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(ut(a===void 0?e.lastEvt:a,e).payload);const{payload:i}=ut(a===void 0?e.lastEvt:a,e,!0),d=()=>{e.handler(i)};e.styleCleanup!==void 0?e.styleCleanup(d):d()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,l.mouse===!0){const a=l.mouseCapture===!0||l.mousecapture===!0?"Capture":"";ce(e,"main",[[t,"mousedown","mouseStart",`passive${a}`]])}ne.has.touch===!0&&ce(e,"main",[[t,"touchstart","touchStart",`passive${l.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const l=t.__qtouchpan;l!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&l.end(),l.handler=n.value),l.direction=Ue(n.modifiers))},beforeUnmount(t){const n=t.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),we(n,"main"),we(n,"temp"),ne.is.firefox===!0&&ke(t,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete t.__qtouchpan)}});function Ce(t,n,l){return l<=n?n:Math.min(l,Math.max(n,t))}const pt="q-slider__marker-labels",Fn=t=>({value:t}),zn=({marker:t})=>y("div",{key:t.value,style:t.style,class:t.classes},t.label),Et=[34,37,40,33,39,38],Hn={...St,...Zt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},On=["pan","update:modelValue","change"];function jn({updateValue:t,updatePosition:n,getDragging:l,formAttrs:u}){const{props:e,emit:a,slots:s,proxy:{$q:i}}=_e(),d=Tt(e,i),f=tn(u),m=V(!1),x=V(!1),v=V(!1),C=V(!1),p=r(()=>e.vertical===!0?"--v":"--h"),q=r(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),B=r(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(i.lang.rtl===!0)),z=r(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),j=r(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),h=r(()=>e.disable!==!0&&e.readonly!==!0&&z.value<j.value),P=r(()=>(String(e.step).trim().split(".")[1]||"").length),N=r(()=>e.step===0?1:e.step),F=r(()=>h.value===!0?e.tabindex||0:-1),D=r(()=>e.max-e.min),Q=r(()=>j.value-z.value),Y=r(()=>Te(z.value)),ve=r(()=>Te(j.value)),re=r(()=>e.vertical===!0?B.value===!0?"bottom":"top":B.value===!0?"right":"left"),be=r(()=>e.vertical===!0?"height":"width"),_=r(()=>e.vertical===!0?"width":"height"),M=r(()=>e.vertical===!0?"vertical":"horizontal"),K=r(()=>{const o={role:"slider","aria-valuemin":z.value,"aria-valuemax":j.value,"aria-orientation":M.value,"data-step":e.step};return e.disable===!0?o["aria-disabled"]="true":e.readonly===!0&&(o["aria-readonly"]="true"),o}),ee=r(()=>`q-slider q-slider${p.value} q-slider--${m.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(h.value===!0?" q-slider--editable":""))+(v.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(d.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+p.value:""));function ie(o){const k="q-slider__"+o;return`${k} ${k}${p.value} ${k}${p.value}${q.value}`}function fe(o){const k="q-slider__"+o;return`${k} ${k}${p.value}`}const Re=r(()=>{const o=e.selectionColor||e.color;return"q-slider__selection absolute"+(o!==void 0?` text-${o}`:"")}),Ge=r(()=>fe("markers")+" absolute overflow-hidden"),le=r(()=>fe("track-container")),se=r(()=>ie("pin")),Ie=r(()=>ie("label")),Ee=r(()=>ie("text-container")),Ve=r(()=>ie("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),te=r(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Je=r(()=>{const o={[_.value]:e.trackSize};return e.trackImg!==void 0&&(o.backgroundImage=`url(${e.trackImg}) !important`),o}),Ze=r(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Ne=r(()=>{const o={[re.value]:`${100*Y.value}%`,[be.value]:`${100*(ve.value-Y.value)}%`};return e.innerTrackImg!==void 0&&(o.backgroundImage=`url(${e.innerTrackImg}) !important`),o});function De(o){const{min:k,max:A,step:E}=e;let U=k+o*(A-k);if(E>0){const ue=(U-k)%E;U+=(Math.abs(ue)>=E/2?(ue<0?-1:1)*E:0)-ue}return P.value>0&&(U=parseFloat(U.toFixed(P.value))),Ce(U,z.value,j.value)}function Te(o){return D.value===0?0:(o-e.min)/D.value}function et(o,k){const A=xe(o),E=e.vertical===!0?Ce((A.top-k.top)/k.height,0,1):Ce((A.left-k.left)/k.width,0,1);return Ce(B.value===!0?1-E:E,Y.value,ve.value)}const Fe=r(()=>en(e.markers)===!0?e.markers:N.value),me=r(()=>{const o=[],k=Fe.value,A=e.max;let E=e.min;do o.push(E),E+=k;while(E<A);return o.push(A),o}),qe=r(()=>{const o=` ${pt}${p.value}-`;return pt+`${o}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${o}${B.value===!0?"rtl":"ltr"}`}),$e=r(()=>e.markerLabels===!1?null:Oe(e.markerLabels).map((o,k)=>({index:k,value:o.value,label:o.label||o.value,classes:qe.value+(o.classes!==void 0?" "+o.classes:""),style:{...Me(o.value),...o.style||{}}}))),ze=r(()=>({markerList:$e.value,markerMap:c.value,classes:qe.value,getStyle:Me})),He=r(()=>{if(Q.value!==0){const o=100*Fe.value/Q.value;return{...Ne.value,backgroundSize:e.vertical===!0?`2px ${o}%`:`${o}% 2px`}}return null});function Oe(o){if(o===!1)return null;if(o===!0)return me.value.map(Fn);if(typeof o=="function")return me.value.map(A=>{const E=o(A);return st(E)===!0?{...E,value:A}:{value:A,label:E}});const k=({value:A})=>A>=e.min&&A<=e.max;return Array.isArray(o)===!0?o.map(A=>st(A)===!0?A:{value:A}).filter(k):Object.keys(o).map(A=>{const E=o[A],U=Number(A);return st(E)===!0?{...E,value:U}:{value:U,label:E}}).filter(k)}function Me(o){return{[re.value]:`${100*(o-e.min)/D.value}%`}}const c=r(()=>{if(e.markerLabels===!1)return null;const o={};return $e.value.forEach(k=>{o[k.value]=k}),o});function b(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](ze.value);const o=s["marker-label"]||zn;return $e.value.map(k=>o({marker:k,...ze.value}))}const w=r(()=>[[Dn,I,void 0,{[M.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function I(o){o.isFinal===!0?(C.value!==void 0&&(n(o.evt),o.touch===!0&&t(!0),C.value=void 0,a("pan","end")),m.value=!1,v.value=!1):o.isFirst===!0?(C.value=l(o.evt),n(o.evt),t(),m.value=!0,a("pan","start")):(n(o.evt),t())}function R(){v.value=!1}function $(o){n(o,l(o)),t(),x.value=!0,m.value=!0,document.addEventListener("mouseup",T,!0)}function T(){x.value=!1,m.value=!1,t(!0),R(),document.removeEventListener("mouseup",T,!0)}function H(o){n(o,l(o)),t(!0)}function Z(o){Et.includes(o.keyCode)&&t(!0)}function Pe(o){if(e.vertical===!0)return null;const k=i.lang.rtl!==e.reverse?1-o:o;return{transform:`translateX(calc(${2*k-1} * ${e.thumbSize} / 2 + ${50-100*k}%))`}}function tt(o){const k=r(()=>x.value===!1&&(v.value===o.focusValue||v.value==="both")?" q-slider--focus":""),A=r(()=>`q-slider__thumb q-slider__thumb${p.value} q-slider__thumb${p.value}-${B.value===!0?"rtl":"ltr"} absolute non-selectable`+k.value+(o.thumbColor.value!==void 0?` text-${o.thumbColor.value}`:"")),E=r(()=>({width:e.thumbSize,height:e.thumbSize,[re.value]:`${100*o.ratio.value}%`,zIndex:v.value===o.focusValue?2:void 0})),U=r(()=>o.labelColor.value!==void 0?` text-${o.labelColor.value}`:""),ue=r(()=>Pe(o.ratio.value)),at=r(()=>"q-slider__text"+(o.labelTextColor.value!==void 0?` text-${o.labelTextColor.value}`:""));return()=>{const ot=[y("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[y("path",{d:e.thumbPath})]),y("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ot.push(y("div",{class:se.value+" absolute fit no-pointer-events"+U.value},[y("div",{class:Ie.value,style:{minWidth:e.thumbSize}},[y("div",{class:Ee.value,style:ue.value},[y("span",{class:at.value},o.label.value)])])])),e.name!==void 0&&e.disable!==!0&&f(ot,"push")),y("div",{class:A.value,style:E.value,...o.getNodeData()},ot)}}function nt(o,k,A,E){const U=[];e.innerTrackColor!=="transparent"&&U.push(y("div",{key:"inner",class:Ze.value,style:Ne.value})),e.selectionColor!=="transparent"&&U.push(y("div",{key:"selection",class:Re.value,style:o.value})),e.markers!==!1&&U.push(y("div",{key:"marker",class:Ge.value,style:He.value})),E(U);const ue=[qt("div",{key:"trackC",class:le.value,tabindex:k.value,...A.value},[y("div",{class:te.value,style:Je.value},U)],"slide",h.value,()=>w.value)];if(e.markerLabels!==!1){const at=e.switchMarkerLabelsSide===!0?"unshift":"push";ue[at](y("div",{key:"markerL",class:Ve.value},b()))}return ue}return Xe(()=>{document.removeEventListener("mouseup",T,!0)}),{state:{active:m,focus:v,preventFocus:x,dragging:C,editable:h,classes:ee,tabindex:F,attributes:K,step:N,decimals:P,trackLen:D,innerMin:z,innerMinRatio:Y,innerMax:j,innerMaxRatio:ve,positionProp:re,sizeProp:be,isReversed:B},methods:{onActivate:$,onMobileClick:H,onBlur:R,onKeyup:Z,getContent:nt,getThumbRenderFn:tt,convertRatioToModel:De,convertModelToRatio:Te,getDraggingRatio:et}}}const Qn=()=>({});var Kn=Se({name:"QSlider",props:{...Hn,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:On,setup(t,{emit:n}){const{proxy:{$q:l}}=_e(),{state:u,methods:e}=jn({updateValue:p,updatePosition:B,getDragging:q,formAttrs:nn(t)}),a=V(null),s=V(0),i=V(0);function d(){i.value=t.modelValue===null?u.innerMin.value:Ce(t.modelValue,u.innerMin.value,u.innerMax.value)}ge(()=>`${t.modelValue}|${u.innerMin.value}|${u.innerMax.value}`,d),d();const f=r(()=>e.convertModelToRatio(i.value)),m=r(()=>u.active.value===!0?s.value:f.value),x=r(()=>{const h={[u.positionProp.value]:`${100*u.innerMinRatio.value}%`,[u.sizeProp.value]:`${100*(m.value-u.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(h.backgroundImage=`url(${t.selectionImg}) !important`),h}),v=e.getThumbRenderFn({focusValue:!0,getNodeData:Qn,ratio:m,label:r(()=>t.labelValue!==void 0?t.labelValue:i.value),thumbColor:r(()=>t.thumbColor||t.color),labelColor:r(()=>t.labelColor),labelTextColor:r(()=>t.labelTextColor)}),C=r(()=>u.editable.value!==!0?{}:l.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:z,onBlur:e.onBlur,onKeydown:j,onKeyup:e.onKeyup});function p(h){i.value!==t.modelValue&&n("update:modelValue",i.value),h===!0&&n("change",i.value)}function q(){return a.value.getBoundingClientRect()}function B(h,P=u.dragging.value){const N=e.getDraggingRatio(h,P);i.value=e.convertRatioToModel(N),s.value=t.snap!==!0||t.step===0?N:e.convertModelToRatio(i.value)}function z(){u.focus.value=!0}function j(h){if(!Et.includes(h.keyCode))return;pe(h);const P=([34,33].includes(h.keyCode)?10:1)*u.step.value,N=([34,37,40].includes(h.keyCode)?-1:1)*(u.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*P;i.value=Ce(parseFloat((i.value+N).toFixed(u.decimals.value)),u.innerMin.value,u.innerMax.value),p()}return()=>{const h=e.getContent(x,u.tabindex,C,P=>{P.push(v())});return y("div",{ref:a,class:u.classes.value+(t.modelValue===null?" q-slider--no-value":""),...u.attributes.value,"aria-valuenow":t.modelValue},h)}}});const ae=an("chessboard",{state:()=>({animations:!0,orientation:"white",piecesVisible:!1}),actions:{rotateBoard(){this.orientation=this.orientation==="white"?"black":"white"}}});g().$onAction(({name:t})=>{t==="start"&&ae().orientation!==g().playerColor&&ae().rotateBoard()});const Un={class:"column items-center q-gutter-sm"},Wn={class:"q-mt-md"},bt=Ae({__name:"GameControls",props:{showSetup:{Boolean,default:!0},showNewGame:{Boolean,default:!0}},setup(t){const n=on(),{t:l}=Bt();function u(){a("black")}function e(){a("white")}async function a(v){g().new({playerColor:v||"white"})}const s=r(()=>g().engineLevel);function i(v){g().$patch({engineLevel:v})}function d(){n.push({name:"setup-board",params:{language:oe().language}})}function f(){ae().rotateBoard()}const m=r(()=>oe().showChessPieceSymbols);function x(){oe().setShowChessPieceSymbols(!oe().showChessPieceSymbols)}return(v,C)=>(O(),G("div",Un,[t.showNewGame?(O(),Ke(he,{key:0,onClick:e,color:"primary"},{default:J(()=>[ye(X(v.$t("New game as white")),1)]),_:1})):de("",!0),t.showNewGame?(O(),Ke(he,{key:1,onClick:u,color:"primary"},{default:J(()=>[ye(X(v.$t("New game as black")),1)]),_:1})):de("",!0),t.showSetup?(O(),Ke(he,{key:2,onClick:d,color:"primary"},{default:J(()=>[ye(X(v.$t("Setup board")),1)]),_:1})):de("",!0),W("div",null,[W("div",null,X(v.$t("Engine level:"))+" "+X(S(s)),1),L(Kn,{"model-value":S(s),"onUpdate:modelValue":C[0]||(C[0]=p=>i(p)),min:0,max:4,id:"aiLevel"},null,8,["model-value"])]),L(he,{onClick:f,color:"primary"},{default:J(()=>[ye(X(v.$t("Rotate board")),1)]),_:1}),W("div",Wn,X(S(l)("Chess pieces notation:"))+" "+X(S(m)?S(l)("Symbols"):S(l)("Letters")),1),L(Lt,{style:{"margin-top":"0","padding-top":"0"},"model-value":S(m),"onUpdate:modelValue":x,color:"secondary"},null,8,["model-value"])]))}}),Xn=t=>new Promise(n=>{let l=t.length;for(let u=0;u<t.length;u++){const e=new Image;e.onload=function(){l--,l<=0&&n()},e.src=t[u]}}),Yn=Ae({__name:"ChessBoard",props:{piecesVisible:{type:Boolean,default:!0}},setup(t){let n;function l(i,d){const f=g().position.moves;if(!g().gameOngoing||!f.find(m=>m.from===i&&m.to===d))return"snapback"}async function u(i,d){(await g().playerMove({from:i,to:d})).isValid||console.warn("Move result is invalid although move was declared valid!"),n.setDraggable(!1)}function e(i,d){const f={onDrop:l,orientation:i,onSnapEnd:u,position:d||"start",onDragStart:()=>n.removeHighlighting()};document.querySelector(".g-board")&&(n=new fn(".g-board",f),s())}g().$onAction(({name:i,after:d})=>{d(()=>{if(!!n&&(i==="playerMove"&&n.position(g().position.fen,!1),i==="historyMoveToIdx"||i==="aiMove"||i==="new")){const f=g().lastOpponentMove;n.removeHighlighting(),a(f),n.position(g().position.fen,ae().animations&&i!=="historyMoveToIdx"),n.setDraggable(!g().position.isFinished&&g().playerColor===g().position.turn)}})}),ae().$onAction(({name:i,after:d})=>{d(()=>{i==="rotateBoard"&&n&&n.orientation(ae().orientation)})}),Le(async()=>{await Xn(["bB","bK","bN","bP","bQ","bR","wB","wK","wN","wP","wQ","wR"].map(i=>`/img/chesspieces/wikipedia/${i}.png`))});function a(i){i&&(n.highlight(i.from.toUpperCase()),n.highlight(i.to.toUpperCase()))}function s(){n&&(n.orientation(ae().orientation),n.setDraggable(!g().position.isFinished&&g().playerColor===g().position.turn))}return Ct(()=>{e(g().playerColor,g().position.fen),setTimeout(()=>{const i=g().lastOpponentMove;i&&a(i)})}),yt(()=>{n&&(n.destroy(),n=void 0)}),(i,d)=>(O(),G("div",{class:Pt([t.piecesVisible?"":"g-hide-pieces","relative-position g-board"])},null,2))}});const Gn={class:"column flex-1"},Jn={class:"row flex-1",style:{"max-height":"100%",overflow:"hidden"}},Zn={class:"col-lg-2 col-md-3 q-pb-sm sm-hide xs-hide",style:{"max-height":"100%","overflow-y":"hidden"}},ea={class:"col-lg-7 col-md-6 col-sm-12 column justify-start align-start",style:{"max-height":"100%","max-width":"100%"}},ta={class:"row items-center justify-between overflow-hidden"},na=W("div",null,null,-1),aa={class:"flex-1 relative-position overflow-hidden"},oa={style:{"aspect-ratio":"1","max-width":"100%","max-height":"100%",margin:"auto",position:"relative",overflow:"hidden"}},ra={class:"absolute-full no-pointer-events column justify-center items-center q-mx-auto",style:{"aspect-ratio":"1","max-height":"100%","max-width":"100%"}},ia={key:0,class:"text-h4 bg-secondary q-pa-md non-selectable",style:{opacity:"0.7"}},la={class:"col-3 q-pt-lg items-center column justify-center xs-hide sm-hide"},va=Ae({__name:"PlayChess",setup(t){const n=V("chess-board"),l=ln();Le(()=>{const p=l.query.difficulty;p&&g().$patch({engineLevel:Number(p)}),g().$subscribe(()=>{g().position.isFinished&&(n.value="chess-board")}),g().$onAction(({name:q})=>{q==="playerMove"&&oe().neverPlayed&&i()}),g().start()}),Xe(()=>{g().stopGame()});const u=r(()=>ae().piecesVisible);function e(){g().historyBack()}function a(){g().historyForward()}function s(){ae().$patch({piecesVisible:!ae().piecesVisible})}function i(){oe().playerStartedPlaying()}const d=r(()=>g().position.isFinished),f=r(()=>g().position.checkMate),m=r(()=>!g().playersTurn),x=r(()=>g().position.indexInHistory<1),v=r(()=>g().position.indexInHistory===g().position.moveHistory.length-1),C=r(()=>oe().neverPlayed);return(p,q)=>(O(),G("div",Gn,[W("div",Jn,[W("div",Zn,[L(rn,{class:"q-px-sm q-ma-sm",style:{height:"100%"}},{default:J(()=>[L(ht)]),_:1})]),W("div",ea,[L(Cn,{modelValue:n.value,"onUpdate:modelValue":q[0]||(q[0]=B=>n.value=B),style:{"flex-wrap":"wrap"}},{default:J(()=>[L(je,{name:"chess-board",label:p.$t("Chess board")},null,8,["label"]),L(je,{name:"hide-board",label:p.$t("Move selection")},null,8,["label"]),L(je,{name:"history",label:p.$t("History"),class:"md-hide lg-hide xl-hide xxl-hide"},null,8,["label"]),L(je,{name:"settings",label:p.$t("Settings"),class:"md-hide lg-hide xl-hide xxl-hide"},null,8,["label"])]),_:1},8,["modelValue"]),L(Pn,{modelValue:n.value,"onUpdate:modelValue":q[1]||(q[1]=B=>n.value=B),animated:"","keep-alive":!0,class:"flex-1 column shadow-2"},{default:J(()=>[L(Qe,{name:"chess-board",class:"column flex-1 q-py-xs q-px-xs-xs q-px-sm-xs overflow-hidden"},{default:J(()=>[W("div",ta,[na,W("div",null,[L(Lt,{"model-value":S(u),"onUpdate:modelValue":s,"checked-icon":S(sn),color:"secondary","unchecked-icon":S(un)},null,8,["model-value","checked-icon","unchecked-icon"]),L(he,{icon:S(cn),flat:"",onClick:e,disable:S(x)||S(m),style:{"transition-duration":"0.5s","transition-delay":"0.2s"}},null,8,["icon","disable"]),L(he,{icon:S(dn),flat:"",onClick:a,disable:S(v)||S(m),style:{"transition-duration":"0.5s","transition-delay":"0.2s"}},null,8,["icon","disable"])]),L(It,{style:ft([{opacity:S(m)&&!S(d)?1:0,"transition-delay":S(m)?"0.75s":"0s"},{"transition-duration":"0.5s","transition-property":"opacity"}]),color:"gray",size:"2em"},null,8,["style"])]),W("div",aa,[W("div",oa,[L(Yn,{"pieces-visible":S(u)||S(d)},null,8,["pieces-visible"]),L(Be,{name:S(vn),color:"red",class:"text-h1 instructions no-pointer-events",style:ft([{display:S(C)?"block":"none"},{"transition-duration":"1s",opacity:"1",position:"absolute"}])},null,8,["name","style"]),ye("s "),W("div",ra,[S(d)?(O(),G("div",ia,X(p.$t(S(f)?"Checkmate":"Draw")),1)):de("",!0)])])])]),_:1}),L(Qe,{name:"hide-board"},{default:J(()=>[L(Vn)]),_:1}),L(Qe,{name:"history"},{default:J(()=>[L(ht)]),_:1}),L(Qe,{name:"settings"},{default:J(()=>[L(bt)]),_:1})]),_:1},8,["modelValue"])]),W("div",la,[L(bt)])])]))}});export{va as default};
