import{A as at,r as D,a as l,B as We,C as st,D as Mt,E as Bt,R as Lt,G as _,H as gt,I as ve,J as At,K as Rt,x as Se,L as It,M as Ce,N as Et,O as Vt,P as $e,S as nt,T as dt,U as me,V as yt,W as Ct,X as Dt,Y as Ue,Z as Ft,$ as kt,a0 as Z,a1 as wt,a2 as xt,a3 as re,a4 as pe,a5 as ye,a6 as _t,a7 as ge,a8 as Nt,a9 as zt,aa as jt,ab as Ot,ac as qt,ad as Tt,ae as St,af as vt,ag as ot,ah as Qt,ai as Kt,aj as lt,ak as Wt,al as Ut,z as Ht,am as x,d as ut,an as Xt,o as de,e as Oe,s as rt,w as Y,j as Te,t as ce,Q as he,ao as ze,g as H,h as N,f as B,u as je,n as Yt,i as Gt,ap as Jt,aq as Zt,ar as ea,as as ta,at as aa,au as na,av as ft,aw as oa}from"./index.31c42902.js";import{_ as la,a as mt,Q as ra,b as ia}from"./ToggleChessPieceNotation.c867de6a.js";import{C as sa}from"./chess-board.interface.1286316e.js";import"./chess-utils.84608043.js";import"./dateTimestampProvider.aca62768.js";let ua=0;const ca=["click","keydown"],da={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ua++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function va(t,a,c,i){const e=Mt(gt,at);if(e===at)return console.error("QTab/QRouteTab component needs to be child of QTabs"),at;const{proxy:n}=Ce(),s=D(null),r=D(null),m=D(null),d=l(()=>t.disable===!0||t.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),h=l(()=>e.currentModel.value===t.name),q=l(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(h.value===!0?" q-tab--active"+(e.tabProps.value.activeClass?" "+e.tabProps.value.activeClass:"")+(e.tabProps.value.activeColor?` text-${e.tabProps.value.activeColor}`:"")+(e.tabProps.value.activeBgColor?` bg-${e.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&e.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||e.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),p=l(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(e.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),y=l(()=>t.disable===!0||e.hasFocus.value===!0||h.value===!1&&e.hasActiveTab.value===!0?-1:t.tabindex||0);function b(v,P){if(P!==!0&&s.value!==null&&s.value.focus(),t.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&ve(v);return}if(i===void 0){e.updateModel({name:t.name}),c("click",v);return}if(i.hasRouterLink.value===!0){const E=(F={})=>{let V;const Q=F.to===void 0||Et(F.to,t.to)===!0?e.avoidRouteWatcher=Vt():null;return i.navigateToRouterLink(v,{...F,returnRouterError:!0}).catch(U=>{V=U}).then(U=>{if(Q===e.avoidRouteWatcher&&(e.avoidRouteWatcher=!1,V===void 0&&(U===void 0||U.message.startsWith("Avoided redundant navigation")===!0)&&e.updateModel({name:t.name})),F.returnRouterError===!0)return V!==void 0?Promise.reject(V):U})};c("click",v,E),v.defaultPrevented!==!0&&E();return}c("click",v)}function $(v){At(v,[13,32])?b(v,!0):Rt(v)!==!0&&v.keyCode>=35&&v.keyCode<=40&&v.altKey!==!0&&v.metaKey!==!0&&e.onKbdNavigate(v.keyCode,n.$el)===!0&&ve(v),c("keydown",v)}function L(){const v=e.tabProps.value.narrowIndicator,P=[],E=_("div",{ref:m,class:["q-tab__indicator",e.tabProps.value.indicatorClass]});t.icon!==void 0&&P.push(_(Se,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&P.push(_("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&P.push(t.alertIcon!==void 0?_(Se,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):_("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),v===!0&&P.push(E);const F=[_("div",{class:"q-focus-helper",tabindex:-1,ref:s}),_("div",{class:p.value},It(a.default,P))];return v===!1&&F.push(E),F}const z={name:l(()=>t.name),rootRef:r,tabIndicatorRef:m,routeData:i};We(()=>{e.unregisterTab(z)}),st(()=>{e.registerTab(z)});function O(v,P){const E={ref:r,class:q.value,tabindex:y.value,role:"tab","aria-selected":h.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:b,onKeydown:$,...P};return Bt(_(v,E,L()),[[Lt,d.value]])}return{renderTab:O,$tabs:e}}var Fe=$e({name:"QTab",props:da,emits:ca,setup(t,{slots:a,emit:c}){const{renderTab:i}=va(t,a,c);return()=>i("div")}});let $t=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(a),t.scrollLeft=-1e3,$t=t.scrollLeft>=0,t.remove()}function fa(t,a,c){const i=c===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?i[0]:i[1]}${t?` text-${t}`:""}`}const ma=["left","center","right","justify"];var ha=$e({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>ma.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:a,emit:c}){const{proxy:i}=Ce(),{$q:e}=i,{registerTick:n}=nt(),{registerTick:s}=nt(),{registerTick:r}=nt(),{registerTimeout:m,removeTimeout:d}=dt(),{registerTimeout:h,removeTimeout:q}=dt(),p=D(null),y=D(null),b=D(t.modelValue),$=D(!1),L=D(!0),z=D(!1),O=D(!1),v=[],P=D(0),E=D(!1);let F=null,V=null,Q;const U=l(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:fa(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),ie=l(()=>{const u=P.value,f=b.value;for(let C=0;C<u;C++)if(v[C].name.value===f)return!0;return!1}),te=l(()=>`q-tabs__content--align-${$.value===!0?"left":O.value===!0?"justify":t.align}`),fe=l(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),k=l(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+te.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),S=l(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),K=l(()=>t.vertical!==!0&&e.lang.rtl===!0),G=l(()=>$t===!1&&K.value===!0);me(K,oe),me(()=>t.modelValue,u=>{ae({name:u,setCurrent:!0,skipEmit:!0})}),me(()=>t.outsideArrows,se);function ae({name:u,setCurrent:f,skipEmit:C}){b.value!==u&&(C!==!0&&t["onUpdate:modelValue"]!==void 0&&c("update:modelValue",u),(f===!0||t["onUpdate:modelValue"]===void 0)&&(He(b.value,u),b.value=u))}function se(){n(()=>{Pe({width:p.value.offsetWidth,height:p.value.offsetHeight})})}function Pe(u){if(S.value===void 0||y.value===null)return;const f=u[S.value.container],C=Math.min(y.value[S.value.scroll],Array.prototype.reduce.call(y.value.children,(A,T)=>A+(T[S.value.content]||0),0)),R=f>0&&C>f;$.value=R,R===!0&&s(oe),O.value=f<parseInt(t.breakpoint,10)}function He(u,f){const C=u!=null&&u!==""?v.find(A=>A.name.value===u):null,R=f!=null&&f!==""?v.find(A=>A.name.value===f):null;if(C&&R){const A=C.tabIndicatorRef.value,T=R.tabIndicatorRef.value;F!==null&&(clearTimeout(F),F=null),A.style.transition="none",A.style.transform="none",T.style.transition="none",T.style.transform="none";const w=A.getBoundingClientRect(),j=T.getBoundingClientRect();T.style.transform=t.vertical===!0?`translate3d(0,${w.top-j.top}px,0) scale3d(1,${j.height?w.height/j.height:1},1)`:`translate3d(${w.left-j.left}px,0,0) scale3d(${j.width?w.width/j.width:1},1,1)`,r(()=>{F=setTimeout(()=>{F=null,T.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",T.style.transform="none"},70)})}R&&$.value===!0&&ne(R.rootRef.value)}function ne(u){const{left:f,width:C,top:R,height:A}=y.value.getBoundingClientRect(),T=u.getBoundingClientRect();let w=t.vertical===!0?T.top-R:T.left-f;if(w<0){y.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(w),oe();return}w+=t.vertical===!0?T.height-A:T.width-C,w>0&&(y.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(w),oe())}function oe(){const u=y.value;if(u===null)return;const f=u.getBoundingClientRect(),C=t.vertical===!0?u.scrollTop:Math.abs(u.scrollLeft);K.value===!0?(L.value=Math.ceil(C+f.width)<u.scrollWidth-1,z.value=C>0):(L.value=C>0,z.value=t.vertical===!0?Math.ceil(C+f.height)<u.scrollHeight:Math.ceil(C+f.width)<u.scrollWidth)}function Me(u){V!==null&&clearInterval(V),V=setInterval(()=>{Ae(u)===!0&&J()},5)}function Be(){Me(G.value===!0?Number.MAX_SAFE_INTEGER:0)}function Le(){Me(G.value===!0?0:Number.MAX_SAFE_INTEGER)}function J(){V!==null&&(clearInterval(V),V=null)}function Xe(u,f){const C=Array.prototype.filter.call(y.value.children,j=>j===f||j.matches&&j.matches(".q-tab.q-focusable")===!0),R=C.length;if(R===0)return;if(u===36)return ne(C[0]),C[0].focus(),!0;if(u===35)return ne(C[R-1]),C[R-1].focus(),!0;const A=u===(t.vertical===!0?38:37),T=u===(t.vertical===!0?40:39),w=A===!0?-1:T===!0?1:void 0;if(w!==void 0){const j=K.value===!0?-1:1,X=C.indexOf(f)+w*j;return X>=0&&X<R&&(ne(C[X]),C[X].focus({preventScroll:!0})),!0}}const Ye=l(()=>G.value===!0?{get:u=>Math.abs(u.scrollLeft),set:(u,f)=>{u.scrollLeft=-f}}:t.vertical===!0?{get:u=>u.scrollTop,set:(u,f)=>{u.scrollTop=f}}:{get:u=>u.scrollLeft,set:(u,f)=>{u.scrollLeft=f}});function Ae(u){const f=y.value,{get:C,set:R}=Ye.value;let A=!1,T=C(f);const w=u<T?-1:1;return T+=w*5,T<0?(A=!0,T=0):(w===-1&&T<=u||w===1&&T>=u)&&(A=!0,T=u),R(f,T),oe(),A}function Re(u,f){for(const C in u)if(u[C]!==f[C])return!1;return!0}function ke(){let u=null,f={matchedLen:0,queryDiff:9999,hrefLen:0};const C=v.filter(w=>w.routeData!==void 0&&w.routeData.hasRouterLink.value===!0),{hash:R,query:A}=i.$route,T=Object.keys(A).length;for(const w of C){const j=w.routeData.exact.value===!0;if(w.routeData[j===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:X,query:qe,matched:Je,href:Ze}=w.routeData.resolvedLink.value,o=Object.keys(qe).length;if(j===!0){if(X!==R||o!==T||Re(A,qe)===!1)continue;u=w.name.value;break}if(X!==""&&X!==R||o!==0&&Re(qe,A)===!1)continue;const g={matchedLen:Je.length,queryDiff:T-o,hrefLen:Ze.length-X.length};if(g.matchedLen>f.matchedLen){u=w.name.value,f=g;continue}else if(g.matchedLen!==f.matchedLen)continue;if(g.queryDiff<f.queryDiff)u=w.name.value,f=g;else if(g.queryDiff!==f.queryDiff)continue;g.hrefLen>f.hrefLen&&(u=w.name.value,f=g)}u===null&&v.some(w=>w.routeData===void 0&&w.name.value===b.value)===!0||ae({name:u,setCurrent:!0})}function Ge(u){if(d(),E.value!==!0&&p.value!==null&&u.target&&typeof u.target.closest=="function"){const f=u.target.closest(".q-tab");f&&p.value.contains(f)===!0&&(E.value=!0,$.value===!0&&ne(f))}}function Ie(){m(()=>{E.value=!1},30)}function ue(){Ve.avoidRouteWatcher===!1?h(ke):q()}function we(){if(Q===void 0){const u=me(()=>i.$route.fullPath,ue);Q=()=>{u(),Q=void 0}}}function xe(u){v.push(u),P.value++,se(),u.routeData===void 0||i.$route===void 0?h(()=>{if($.value===!0){const f=b.value,C=f!=null&&f!==""?v.find(R=>R.name.value===f):null;C&&ne(C.rootRef.value)}}):(we(),u.routeData.hasRouterLink.value===!0&&ue())}function Ee(u){v.splice(v.indexOf(u),1),P.value--,se(),Q!==void 0&&u.routeData!==void 0&&(v.every(f=>f.routeData===void 0)===!0&&Q(),ue())}const Ve={currentModel:b,tabProps:U,hasFocus:E,hasActiveTab:ie,registerTab:xe,unregisterTab:Ee,verifyRouteModel:ue,updateModel:ae,onKbdNavigate:Xe,avoidRouteWatcher:!1};Ft(gt,Ve);function De(){F!==null&&clearTimeout(F),J(),Q!==void 0&&Q()}let _e;return We(De),yt(()=>{_e=Q!==void 0,De()}),Ct(()=>{_e===!0&&we(),se()}),()=>_("div",{ref:p,class:fe.value,role:"tablist",onFocusin:Ge,onFocusout:Ie},[_(Dt,{onResize:Pe}),_("div",{ref:y,class:k.value,onScroll:oe},Ue(a.default)),_(Se,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(L.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||e.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:Be,onTouchstartPassive:Be,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J}),_(Se,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||e.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:Le,onTouchstartPassive:Le,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J})])}});const ct={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ba=Object.keys(ct);ct.all=!0;function Qe(t){const a={};for(const c of ba)t[c]===!0&&(a[c]=!0);return Object.keys(a).length===0?ct:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}function Ke(t,a){return a.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof a.handler=="function"&&t.target.nodeName.toUpperCase()!=="INPUT"&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(a.uid)===-1)}function pa(t){const a=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((c,i)=>{const e=parseFloat(c);e&&(a[i]=e)}),a}var ga=kt({name:"touch-swipe",beforeMount(t,{value:a,arg:c,modifiers:i}){if(i.mouse!==!0&&Z.has.touch!==!0)return;const e=i.mouseCapture===!0?"Capture":"",n={handler:a,sensitivity:pa(c),direction:Qe(i),noop:wt,mouseStart(s){Ke(s,n)&&xt(s)&&(re(n,"temp",[[document,"mousemove","move",`notPassive${e}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(s,!0))},touchStart(s){if(Ke(s,n)){const r=s.target;re(n,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),n.start(s)}},start(s,r){Z.is.firefox===!0&&pe(t,!0);const m=ye(s);n.event={x:m.left,y:m.top,time:Date.now(),mouse:r===!0,dir:!1}},move(s){if(n.event===void 0)return;if(n.event.dir!==!1){ve(s);return}const r=Date.now()-n.event.time;if(r===0)return;const m=ye(s),d=m.left-n.event.x,h=Math.abs(d),q=m.top-n.event.y,p=Math.abs(q);if(n.event.mouse!==!0){if(h<n.sensitivity[1]&&p<n.sensitivity[1]){n.end(s);return}}else if(h<n.sensitivity[2]&&p<n.sensitivity[2])return;const y=h/r,b=p/r;n.direction.vertical===!0&&h<p&&h<100&&b>n.sensitivity[0]&&(n.event.dir=q<0?"up":"down"),n.direction.horizontal===!0&&h>p&&p<100&&y>n.sensitivity[0]&&(n.event.dir=d<0?"left":"right"),n.direction.up===!0&&h<p&&q<0&&h<100&&b>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&h<p&&q>0&&h<100&&b>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&h>p&&d<0&&p<100&&y>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&h>p&&d>0&&p<100&&y>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(ve(s),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),_t(),n.styleCleanup=$=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const L=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(L,50):L()}),n.handler({evt:s,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:r,distance:{x:h,y:p}})):n.end(s)},end(s){n.event!==void 0&&(ge(n,"temp"),Z.is.firefox===!0&&pe(t,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),s!==void 0&&n.event.dir!==!1&&ve(s),n.event=void 0)}};if(t.__qtouchswipe=n,i.mouse===!0){const s=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";re(n,"main",[[t,"mousedown","mouseStart",`passive${s}`]])}Z.has.touch===!0&&re(n,"main",[[t,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,a){const c=t.__qtouchswipe;c!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&c.end(),c.handler=a.value),c.direction=Qe(a.modifiers))},beforeUnmount(t){const a=t.__qtouchswipe;a!==void 0&&(ge(a,"main"),ge(a,"temp"),Z.is.firefox===!0&&pe(t,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete t.__qtouchswipe)}});function ya(){const t=new Map;return{getCache:function(a,c){return t[a]===void 0?t[a]=c:t[a]},getCacheWithFn:function(a,c){return t[a]===void 0?t[a]=c():t[a]}}}const Ca={name:{required:!0},disable:Boolean},ht={setup(t,{slots:a}){return()=>_("div",{class:"q-panel scroll",role:"tabpanel"},Ue(a.default))}},ka={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},wa=["update:modelValue","beforeTransition","transition"];function xa(){const{props:t,emit:a,proxy:c}=Ce(),{getCacheWithFn:i}=ya();let e,n;const s=D(null),r=D(null);function m(k){const S=t.vertical===!0?"up":"left";V((c.$q.lang.rtl===!0?-1:1)*(k.direction===S?1:-1))}const d=l(()=>[[ga,m,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),h=l(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),q=l(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),p=l(()=>`--q-transition-duration: ${t.transitionDuration}ms`),y=l(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),b=l(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),$=l(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);me(()=>t.modelValue,(k,S)=>{const K=v(k)===!0?P(k):-1;n!==!0&&F(K===-1?0:K<P(S)?-1:1),s.value!==K&&(s.value=K,a("beforeTransition",k,S),jt(()=>{a("transition",k,S)}))});function L(){V(1)}function z(){V(-1)}function O(k){a("update:modelValue",k)}function v(k){return k!=null&&k!==""}function P(k){return e.findIndex(S=>S.props.name===k&&S.props.disable!==""&&S.props.disable!==!0)}function E(){return e.filter(k=>k.props.disable!==""&&k.props.disable!==!0)}function F(k){const S=k!==0&&t.animated===!0&&s.value!==-1?"q-transition--"+(k===-1?h.value:q.value):null;r.value!==S&&(r.value=S)}function V(k,S=s.value){let K=S+k;for(;K>-1&&K<e.length;){const G=e[K];if(G!==void 0&&G.props.disable!==""&&G.props.disable!==!0){F(k),n=!0,a("update:modelValue",G.props.name),setTimeout(()=>{n=!1});return}K+=k}t.infinite===!0&&e.length>0&&S!==-1&&S!==e.length&&V(k,k===-1?e.length:-1)}function Q(){const k=P(t.modelValue);return s.value!==k&&(s.value=k),!0}function U(){const k=v(t.modelValue)===!0&&Q()&&e[s.value];return t.keepAlive===!0?[_(Ot,b.value,[_($.value===!0?i(y.value,()=>({...ht,name:y.value})):ht,{key:y.value,style:p.value},()=>k)])]:[_("div",{class:"q-panel scroll",style:p.value,key:y.value,role:"tabpanel"},[k])]}function ie(){if(e.length!==0)return t.animated===!0?[_(Nt,{name:r.value},U)]:U()}function te(k){return e=zt(Ue(k.default,[])).filter(S=>S.props!==null&&S.props.slot===void 0&&v(S.props.name)===!0),e.length}function fe(){return e}return Object.assign(c,{next:L,previous:z,goTo:O}),{panelIndex:s,panelDirectives:d,updatePanelsList:te,updatePanelIndex:Q,getPanelContent:ie,getEnabledPanels:E,getPanels:fe,isValidPanelName:v,keepAliveProps:b,needsUniqueKeepAliveWrapper:$,goToPanelByOffset:V,goToPanel:O,nextPanel:L,previousPanel:z}}var Ne=$e({name:"QTabPanel",props:Ca,setup(t,{slots:a}){return()=>_("div",{class:"q-tab-panel",role:"tabpanel"},Ue(a.default))}}),_a=$e({name:"QTabPanels",props:{...ka,...qt},emits:wa,setup(t,{slots:a}){const c=Ce(),i=Tt(t,c.proxy.$q),{updatePanelsList:e,getPanelContent:n,panelDirectives:s}=xa(),r=l(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(e(a),St("div",{class:r.value},n(),"pan",t.swipeable,()=>s.value))}});function it(t,a,c){const i=ye(t);let e,n=i.left-a.event.x,s=i.top-a.event.y,r=Math.abs(n),m=Math.abs(s);const d=a.direction;d.horizontal===!0&&d.vertical!==!0?e=n<0?"left":"right":d.horizontal!==!0&&d.vertical===!0?e=s<0?"up":"down":d.up===!0&&s<0?(e="up",r>m&&(d.left===!0&&n<0?e="left":d.right===!0&&n>0&&(e="right"))):d.down===!0&&s>0?(e="down",r>m&&(d.left===!0&&n<0?e="left":d.right===!0&&n>0&&(e="right"))):d.left===!0&&n<0?(e="left",r<m&&(d.up===!0&&s<0?e="up":d.down===!0&&s>0&&(e="down"))):d.right===!0&&n>0&&(e="right",r<m&&(d.up===!0&&s<0?e="up":d.down===!0&&s>0&&(e="down")));let h=!1;if(e===void 0&&c===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};e=a.event.lastDir,h=!0,e==="left"||e==="right"?(i.left-=n,r=0,n=0):(i.top-=s,m=0,s=0)}return{synthetic:h,payload:{evt:t,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:i,direction:e,isFirst:a.event.isFirst,isFinal:c===!0,duration:Date.now()-a.event.time,distance:{x:r,y:m},offset:{x:n,y:s},delta:{x:i.left-a.event.lastX,y:i.top-a.event.lastY}}}}let qa=0;var Ta=kt({name:"touch-pan",beforeMount(t,{value:a,modifiers:c}){if(c.mouse!==!0&&Z.has.touch!==!0)return;function i(n,s){c.mouse===!0&&s===!0?ve(n):(c.stop===!0&&ot(n),c.prevent===!0&&vt(n))}const e={uid:"qvtp_"+qa++,handler:a,modifiers:c,direction:Qe(c),noop:wt,mouseStart(n){Ke(n,e)&&xt(n)&&(re(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(n,!0))},touchStart(n){if(Ke(n,e)){const s=n.target;re(e,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),e.start(n)}},start(n,s){if(Z.is.firefox===!0&&pe(t,!0),e.lastEvt=n,s===!0||c.stop===!0){if(e.direction.all!==!0&&(s!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const d=n.type.indexOf("mouse")>-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&vt(d),n.cancelBubble===!0&&ot(d),Object.assign(d,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[e.uid]:n.qClonedBy.concat(e.uid)}),e.initialEvent={target:n.target,event:d}}ot(n)}const{left:r,top:m}=ye(n);e.event={x:r,y:m,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:m}},move(n){if(e.event===void 0)return;const s=ye(n),r=s.left-e.event.x,m=s.top-e.event.y;if(r===0&&m===0)return;e.lastEvt=n;const d=e.event.mouse===!0,h=()=>{i(n,d);let y;c.preserveCursor!==!0&&c.preservecursor!==!0&&(y=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),d===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),_t(),e.styleCleanup=b=>{if(e.styleCleanup=void 0,y!==void 0&&(document.documentElement.style.cursor=y),document.body.classList.remove("non-selectable"),d===!0){const $=()=>{document.body.classList.remove("no-pointer-events--children")};b!==void 0?setTimeout(()=>{$(),b()},50):$()}else b!==void 0&&b()}};if(e.event.detected===!0){e.event.isFirst!==!0&&i(n,e.event.mouse);const{payload:y,synthetic:b}=it(n,e,!1);y!==void 0&&(e.handler(y)===!1?e.end(n):(e.styleCleanup===void 0&&e.event.isFirst===!0&&h(),e.event.lastX=y.position.left,e.event.lastY=y.position.top,e.event.lastDir=b===!0?void 0:y.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||d===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){h(),e.event.detected=!0,e.move(n);return}const q=Math.abs(r),p=Math.abs(m);q!==p&&(e.direction.horizontal===!0&&q>p||e.direction.vertical===!0&&q<p||e.direction.up===!0&&q<p&&m<0||e.direction.down===!0&&q<p&&m>0||e.direction.left===!0&&q>p&&r<0||e.direction.right===!0&&q>p&&r>0?(e.event.detected=!0,e.move(n)):e.end(n,!0))},end(n,s){if(e.event!==void 0){if(ge(e,"temp"),Z.is.firefox===!0&&pe(t,!1),s===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(it(n===void 0?e.lastEvt:n,e).payload);const{payload:r}=it(n===void 0?e.lastEvt:n,e,!0),m=()=>{e.handler(r)};e.styleCleanup!==void 0?e.styleCleanup(m):m()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,c.mouse===!0){const n=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";re(e,"main",[[t,"mousedown","mouseStart",`passive${n}`]])}Z.has.touch===!0&&re(e,"main",[[t,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,a){const c=t.__qtouchpan;c!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&c.end(),c.handler=a.value),c.direction=Qe(a.modifiers))},beforeUnmount(t){const a=t.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),ge(a,"main"),ge(a,"temp"),Z.is.firefox===!0&&pe(t,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete t.__qtouchpan)}});function be(t,a,c){return c<=a?a:Math.min(c,Math.max(a,t))}const bt="q-slider__marker-labels",Sa=t=>({value:t}),$a=({marker:t})=>_("div",{key:t.value,style:t.style,class:t.classes},t.label),Pt=[34,37,40,33,39,38],Pa={...qt,...Qt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ma=["pan","update:modelValue","change"];function Ba({updateValue:t,updatePosition:a,getDragging:c,formAttrs:i}){const{props:e,emit:n,slots:s,proxy:{$q:r}}=Ce(),m=Tt(e,r),d=Wt(i),h=D(!1),q=D(!1),p=D(!1),y=D(!1),b=l(()=>e.vertical===!0?"--v":"--h"),$=l(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),L=l(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(r.lang.rtl===!0)),z=l(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),O=l(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),v=l(()=>e.disable!==!0&&e.readonly!==!0&&z.value<O.value),P=l(()=>(String(e.step).trim().split(".")[1]||"").length),E=l(()=>e.step===0?1:e.step),F=l(()=>v.value===!0?e.tabindex||0:-1),V=l(()=>e.max-e.min),Q=l(()=>O.value-z.value),U=l(()=>ke(z.value)),ie=l(()=>ke(O.value)),te=l(()=>e.vertical===!0?L.value===!0?"bottom":"top":L.value===!0?"right":"left"),fe=l(()=>e.vertical===!0?"height":"width"),k=l(()=>e.vertical===!0?"width":"height"),S=l(()=>e.vertical===!0?"vertical":"horizontal"),K=l(()=>{const o={role:"slider","aria-valuemin":z.value,"aria-valuemax":O.value,"aria-orientation":S.value,"data-step":e.step};return e.disable===!0?o["aria-disabled"]="true":e.readonly===!0&&(o["aria-readonly"]="true"),o}),G=l(()=>`q-slider q-slider${b.value} q-slider--${h.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(v.value===!0?" q-slider--editable":""))+(p.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(m.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+b.value:""));function ae(o){const g="q-slider__"+o;return`${g} ${g}${b.value} ${g}${b.value}${$.value}`}function se(o){const g="q-slider__"+o;return`${g} ${g}${b.value}`}const Pe=l(()=>{const o=e.selectionColor||e.color;return"q-slider__selection absolute"+(o!==void 0?` text-${o}`:"")}),He=l(()=>se("markers")+" absolute overflow-hidden"),ne=l(()=>se("track-container")),oe=l(()=>ae("pin")),Me=l(()=>ae("label")),Be=l(()=>ae("text-container")),Le=l(()=>ae("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),J=l(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Xe=l(()=>{const o={[k.value]:e.trackSize};return e.trackImg!==void 0&&(o.backgroundImage=`url(${e.trackImg}) !important`),o}),Ye=l(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Ae=l(()=>{const o={[te.value]:`${100*U.value}%`,[fe.value]:`${100*(ie.value-U.value)}%`};return e.innerTrackImg!==void 0&&(o.backgroundImage=`url(${e.innerTrackImg}) !important`),o});function Re(o){const{min:g,max:M,step:I}=e;let W=g+o*(M-g);if(I>0){const le=(W-g)%I;W+=(Math.abs(le)>=I/2?(le<0?-1:1)*I:0)-le}return P.value>0&&(W=parseFloat(W.toFixed(P.value))),be(W,z.value,O.value)}function ke(o){return V.value===0?0:(o-e.min)/V.value}function Ge(o,g){const M=ye(o),I=e.vertical===!0?be((M.top-g.top)/g.height,0,1):be((M.left-g.left)/g.width,0,1);return be(L.value===!0?1-I:I,U.value,ie.value)}const Ie=l(()=>Kt(e.markers)===!0?e.markers:E.value),ue=l(()=>{const o=[],g=Ie.value,M=e.max;let I=e.min;do o.push(I),I+=g;while(I<M);return o.push(M),o}),we=l(()=>{const o=` ${bt}${b.value}-`;return bt+`${o}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${o}${L.value===!0?"rtl":"ltr"}`}),xe=l(()=>e.markerLabels===!1?null:De(e.markerLabels).map((o,g)=>({index:g,value:o.value,label:o.label||o.value,classes:we.value+(o.classes!==void 0?" "+o.classes:""),style:{..._e(o.value),...o.style||{}}}))),Ee=l(()=>({markerList:xe.value,markerMap:u.value,classes:we.value,getStyle:_e})),Ve=l(()=>{if(Q.value!==0){const o=100*Ie.value/Q.value;return{...Ae.value,backgroundSize:e.vertical===!0?`2px ${o}%`:`${o}% 2px`}}return null});function De(o){if(o===!1)return null;if(o===!0)return ue.value.map(Sa);if(typeof o=="function")return ue.value.map(M=>{const I=o(M);return lt(I)===!0?{...I,value:M}:{value:M,label:I}});const g=({value:M})=>M>=e.min&&M<=e.max;return Array.isArray(o)===!0?o.map(M=>lt(M)===!0?M:{value:M}).filter(g):Object.keys(o).map(M=>{const I=o[M],W=Number(M);return lt(I)===!0?{...I,value:W}:{value:W,label:I}}).filter(g)}function _e(o){return{[te.value]:`${100*(o-e.min)/V.value}%`}}const u=l(()=>{if(e.markerLabels===!1)return null;const o={};return xe.value.forEach(g=>{o[g.value]=g}),o});function f(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](Ee.value);const o=s["marker-label"]||$a;return xe.value.map(g=>o({marker:g,...Ee.value}))}const C=l(()=>[[Ta,R,void 0,{[S.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function R(o){o.isFinal===!0?(y.value!==void 0&&(a(o.evt),o.touch===!0&&t(!0),y.value=void 0,n("pan","end")),h.value=!1,p.value=!1):o.isFirst===!0?(y.value=c(o.evt),a(o.evt),t(),h.value=!0,n("pan","start")):(a(o.evt),t())}function A(){p.value=!1}function T(o){a(o,c(o)),t(),q.value=!0,h.value=!0,document.addEventListener("mouseup",w,!0)}function w(){q.value=!1,h.value=!1,t(!0),A(),document.removeEventListener("mouseup",w,!0)}function j(o){a(o,c(o)),t(!0)}function X(o){Pt.includes(o.keyCode)&&t(!0)}function qe(o){if(e.vertical===!0)return null;const g=r.lang.rtl!==e.reverse?1-o:o;return{transform:`translateX(calc(${2*g-1} * ${e.thumbSize} / 2 + ${50-100*g}%))`}}function Je(o){const g=l(()=>q.value===!1&&(p.value===o.focusValue||p.value==="both")?" q-slider--focus":""),M=l(()=>`q-slider__thumb q-slider__thumb${b.value} q-slider__thumb${b.value}-${L.value===!0?"rtl":"ltr"} absolute non-selectable`+g.value+(o.thumbColor.value!==void 0?` text-${o.thumbColor.value}`:"")),I=l(()=>({width:e.thumbSize,height:e.thumbSize,[te.value]:`${100*o.ratio.value}%`,zIndex:p.value===o.focusValue?2:void 0})),W=l(()=>o.labelColor.value!==void 0?` text-${o.labelColor.value}`:""),le=l(()=>qe(o.ratio.value)),et=l(()=>"q-slider__text"+(o.labelTextColor.value!==void 0?` text-${o.labelTextColor.value}`:""));return()=>{const tt=[_("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[_("path",{d:e.thumbPath})]),_("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(tt.push(_("div",{class:oe.value+" absolute fit no-pointer-events"+W.value},[_("div",{class:Me.value,style:{minWidth:e.thumbSize}},[_("div",{class:Be.value,style:le.value},[_("span",{class:et.value},o.label.value)])])])),e.name!==void 0&&e.disable!==!0&&d(tt,"push")),_("div",{class:M.value,style:I.value,...o.getNodeData()},tt)}}function Ze(o,g,M,I){const W=[];e.innerTrackColor!=="transparent"&&W.push(_("div",{key:"inner",class:Ye.value,style:Ae.value})),e.selectionColor!=="transparent"&&W.push(_("div",{key:"selection",class:Pe.value,style:o.value})),e.markers!==!1&&W.push(_("div",{key:"marker",class:He.value,style:Ve.value})),I(W);const le=[St("div",{key:"trackC",class:ne.value,tabindex:g.value,...M.value},[_("div",{class:J.value,style:Xe.value},W)],"slide",v.value,()=>C.value)];if(e.markerLabels!==!1){const et=e.switchMarkerLabelsSide===!0?"unshift":"push";le[et](_("div",{key:"markerL",class:Le.value},f()))}return le}return We(()=>{document.removeEventListener("mouseup",w,!0)}),{state:{active:h,focus:p,preventFocus:q,dragging:y,editable:v,classes:G,tabindex:F,attributes:K,step:E,decimals:P,trackLen:V,innerMin:z,innerMinRatio:U,innerMax:O,innerMaxRatio:ie,positionProp:te,sizeProp:fe,isReversed:L},methods:{onActivate:T,onMobileClick:j,onBlur:A,onKeyup:X,getContent:Ze,getThumbRenderFn:Je,convertRatioToModel:Re,convertModelToRatio:ke,getDraggingRatio:Ge}}}const La=()=>({});var Aa=$e({name:"QSlider",props:{...Pa,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:Ma,setup(t,{emit:a}){const{proxy:{$q:c}}=Ce(),{state:i,methods:e}=Ba({updateValue:b,updatePosition:L,getDragging:$,formAttrs:Ut(t)}),n=D(null),s=D(0),r=D(0);function m(){r.value=t.modelValue===null?i.innerMin.value:be(t.modelValue,i.innerMin.value,i.innerMax.value)}me(()=>`${t.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,m),m();const d=l(()=>e.convertModelToRatio(r.value)),h=l(()=>i.active.value===!0?s.value:d.value),q=l(()=>{const v={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(h.value-i.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(v.backgroundImage=`url(${t.selectionImg}) !important`),v}),p=e.getThumbRenderFn({focusValue:!0,getNodeData:La,ratio:h,label:l(()=>t.labelValue!==void 0?t.labelValue:r.value),thumbColor:l(()=>t.thumbColor||t.color),labelColor:l(()=>t.labelColor),labelTextColor:l(()=>t.labelTextColor)}),y=l(()=>i.editable.value!==!0?{}:c.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:z,onBlur:e.onBlur,onKeydown:O,onKeyup:e.onKeyup});function b(v){r.value!==t.modelValue&&a("update:modelValue",r.value),v===!0&&a("change",r.value)}function $(){return n.value.getBoundingClientRect()}function L(v,P=i.dragging.value){const E=e.getDraggingRatio(v,P);r.value=e.convertRatioToModel(E),s.value=t.snap!==!0||t.step===0?E:e.convertModelToRatio(r.value)}function z(){i.focus.value=!0}function O(v){if(!Pt.includes(v.keyCode))return;ve(v);const P=([34,33].includes(v.keyCode)?10:1)*i.step.value,E=([34,37,40].includes(v.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*P;r.value=be(parseFloat((r.value+E).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),b()}return()=>{const v=e.getContent(q,i.tabindex,y,P=>{P.push(p())});return _("div",{ref:n,class:i.classes.value+(t.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":t.modelValue},v)}}});const ee=Ht("chessboard",{state:()=>({animations:!0,orientation:"white",piecesVisible:!1}),actions:{rotateBoard(){this.orientation=this.orientation==="white"?"black":"white"}}});x().$onAction(({name:t})=>{t==="start"&&ee().orientation!==x().playerColor&&ee().rotateBoard()});const Ra={class:"column items-center q-gutter-sm"},pt=ut({__name:"GameControls",props:{showSetup:{Boolean,default:!0},showNewGame:{Boolean,default:!0}},setup(t){const a=Xt();function c(){e("black")}function i(){e("white")}async function e(d){x().new({playerColor:d||"white"})}const n=l(()=>x().engineLevel);function s(d){x().$patch({engineLevel:d})}function r(){a.push({name:"setup-board",params:{language:je().language}})}function m(){ee().rotateBoard()}return(d,h)=>(de(),Oe("div",Ra,[t.showNewGame?(de(),rt(he,{key:0,onClick:i,color:"primary"},{default:Y(()=>[Te(ce(d.$t("New game as white")),1)]),_:1})):ze("",!0),t.showNewGame?(de(),rt(he,{key:1,onClick:c,color:"primary"},{default:Y(()=>[Te(ce(d.$t("New game as black")),1)]),_:1})):ze("",!0),t.showSetup?(de(),rt(he,{key:2,onClick:r,color:"primary"},{default:Y(()=>[Te(ce(d.$t("Setup board")),1)]),_:1})):ze("",!0),H("div",null,[H("div",null,ce(d.$t("Engine level:"))+" "+ce(N(n)),1),B(Aa,{"model-value":N(n),"onUpdate:modelValue":h[0]||(h[0]=q=>s(q)),min:0,max:4,id:"aiLevel"},null,8,["model-value"])]),B(he,{onClick:m,color:"primary"},{default:Y(()=>[Te(ce(d.$t("Rotate board")),1)]),_:1}),B(la)]))}}),Ia=t=>new Promise(a=>{let c=t.length;for(let i=0;i<t.length;i++){const e=new Image;e.onload=function(){c--,c<=0&&a()},e.src=t[i]}}),Ea=ut({__name:"ChessBoard",props:{piecesVisible:{type:Boolean,default:!0}},setup(t){let a;function c(r,m){const d=x().position.moves;if(!x().gameOngoing||!d.find(h=>h.from===r&&h.to===m))return"snapback"}async function i(r,m){(await x().playerMove({from:r,to:m})).isValid||console.warn("Move result is invalid although move was declared valid!"),a.setDraggable(!1)}function e(r,m){const d={onDrop:c,orientation:r,onSnapEnd:i,position:m||"start",onDragStart:()=>a.removeHighlighting()};document.querySelector(".g-board")&&(a=new sa(".g-board",d),s())}x().$onAction(({name:r,after:m})=>{m(()=>{if(!!a&&(r==="playerMove"&&a.position(x().position.fen,!1),r==="historyMoveToIdx"||r==="aiMove"||r==="new")){const d=x().lastOpponentMove;a.removeHighlighting(),n(d),a.position(x().position.fen,ee().animations&&r!=="historyMoveToIdx"),a.setDraggable(!x().position.isFinished&&x().playerColor===x().position.turn)}})}),ee().$onAction(({name:r,after:m})=>{m(()=>{r==="rotateBoard"&&a&&a.orientation(ee().orientation)})}),st(async()=>{await Ia(["bB","bK","bN","bP","bQ","bR","wB","wK","wN","wP","wQ","wR"].map(r=>`/img/chesspieces/wikipedia/${r}.png`))});function n(r){r&&(a.highlight(r.from.toUpperCase()),a.highlight(r.to.toUpperCase()))}function s(){a&&(a.orientation(ee().orientation),a.setDraggable(!x().position.isFinished&&x().playerColor===x().position.turn))}return Ct(()=>{e(x().playerColor,x().position.fen),setTimeout(()=>{const r=x().lastOpponentMove;r&&n(r)})}),yt(()=>{a&&(a.destroy(),a=void 0)}),(r,m)=>(de(),Oe("div",{class:Yt([t.piecesVisible?"":"g-hide-pieces","relative-position g-board"])},null,2))}});const Va={class:"column flex-1"},Da={class:"row flex-1",style:{"max-height":"100%",overflow:"hidden"}},Fa={class:"col-lg-2 col-md-3 q-pb-sm sm-hide xs-hide",style:{"max-height":"100%","overflow-y":"hidden"}},Na={class:"col-lg-7 col-md-6 col-sm-12 col-xs-12 column justify-start align-start",style:{"max-height":"100%","max-width":"100%"}},za={class:"row items-center justify-between overflow-hidden"},ja=H("div",null,null,-1),Oa={class:"flex-1 relative-position overflow-hidden"},Qa={style:{"aspect-ratio":"1","max-width":"100%","max-height":"100%",margin:"auto",position:"relative",overflow:"hidden"}},Ka={class:"absolute-full no-pointer-events column justify-center items-center q-mx-auto",style:{"aspect-ratio":"1","max-height":"100%","max-width":"100%"}},Wa={key:0,class:"text-h4 bg-secondary q-pa-md non-selectable",style:{opacity:"0.7"}},Ua={class:"col-3 q-pt-lg items-center column justify-center xs-hide sm-hide"},Za=ut({__name:"PlayChess",setup(t){const a=D("chess-board"),c=Jt();st(()=>{const b=c.query.difficulty;b&&x().$patch({engineLevel:Number(b)}),x().$subscribe(()=>{x().position.isFinished&&(a.value="chess-board")}),x().$onAction(({name:$})=>{$==="playerMove"&&je().neverPlayed&&r()}),x().start()}),We(()=>{x().stopGame()});const i=l(()=>ee().piecesVisible);function e(){x().historyBack()}function n(){x().historyForward()}function s(){ee().$patch({piecesVisible:!ee().piecesVisible})}function r(){je().playerStartedPlaying()}const m=l(()=>x().position.isFinished),d=l(()=>x().position.checkMate),h=l(()=>!x().playersTurn),q=l(()=>x().position.indexInHistory<1),p=l(()=>x().position.indexInHistory===x().position.moveHistory.length-1),y=l(()=>je().neverPlayed);return(b,$)=>(de(),Oe("div",Va,[H("div",Da,[H("div",Fa,[B(Gt,{class:"q-px-sm q-ma-sm",style:{height:"100%"}},{default:Y(()=>[B(mt)]),_:1})]),H("div",Na,[B(ha,{modelValue:a.value,"onUpdate:modelValue":$[0]||($[0]=L=>a.value=L),style:{"flex-wrap":"wrap"}},{default:Y(()=>[B(Fe,{name:"chess-board",label:b.$t("Chess board")},null,8,["label"]),B(Fe,{name:"hide-board",label:b.$t("Move selection")},null,8,["label"]),B(Fe,{name:"history",label:b.$t("History"),class:"md-hide lg-hide xl-hide xxl-hide"},null,8,["label"]),B(Fe,{name:"settings",label:b.$t("Settings"),class:"md-hide lg-hide xl-hide xxl-hide"},null,8,["label"])]),_:1},8,["modelValue"]),B(_a,{modelValue:a.value,"onUpdate:modelValue":$[1]||($[1]=L=>a.value=L),animated:"","keep-alive":!0,class:"flex-1 column shadow-2"},{default:Y(()=>[B(Ne,{name:"chess-board",class:"column flex-1 q-py-xs q-px-xs-xs q-px-sm-xs overflow-hidden"},{default:Y(()=>[H("div",za,[ja,H("div",null,[B(Zt,{"model-value":N(i),"onUpdate:modelValue":s,"checked-icon":N(ea),color:"secondary","unchecked-icon":N(ta)},null,8,["model-value","checked-icon","unchecked-icon"]),B(he,{icon:N(aa),flat:"",onClick:e,disable:N(q)||N(h),style:{"transition-duration":"0.5s","transition-delay":"0.2s"}},null,8,["icon","disable"]),B(he,{icon:N(na),flat:"",onClick:n,disable:N(p)||N(h),style:{"transition-duration":"0.5s","transition-delay":"0.2s"}},null,8,["icon","disable"])]),B(ra,{style:ft([{opacity:N(h)&&!N(m)?1:0,"transition-delay":N(h)?"0.75s":"0s"},{"transition-duration":"0.5s","transition-property":"opacity"}]),color:"gray",size:"2em"},null,8,["style"])]),H("div",Oa,[H("div",Qa,[B(Ea,{"pieces-visible":N(i)||N(m)},null,8,["pieces-visible"]),B(Se,{name:N(oa),color:"red",class:"text-h1 instructions no-pointer-events",style:ft([{display:N(y)?"block":"none"},{"transition-duration":"1s",opacity:"1",position:"absolute"}])},null,8,["name","style"]),Te("s "),H("div",Ka,[N(m)?(de(),Oe("div",Wa,ce(b.$t(N(d)?"Checkmate":"Draw")),1)):ze("",!0)])])])]),_:1}),B(Ne,{name:"hide-board"},{default:Y(()=>[B(ia)]),_:1}),B(Ne,{name:"history"},{default:Y(()=>[B(mt)]),_:1}),B(Ne,{name:"settings"},{default:Y(()=>[B(pt)]),_:1})]),_:1},8,["modelValue"])]),H("div",Ua,[B(pt)])])]))}});export{Za as default};
